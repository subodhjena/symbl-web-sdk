<!-- HTML for static distribution bundle build -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Symbl Web SDK example</title>
    <script src="symbl.js"></script>
    <script>
    const authenticate = async (withToken) => {
        let config;
        if (withToken) {
            config = {
                accessToken: "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlFVUTRNemhDUVVWQk1rTkJNemszUTBNMlFVVTRRekkyUmpWQ056VTJRelUxUTBVeE5EZzFNUSJ9.eyJodHRwczovL3BsYXRmb3JtLnN5bWJsLmFpL3VzZXJJZCI6IjUxNDU0NTg5NDgxNzc5MjAiLCJpc3MiOiJodHRwczovL2RpcmVjdC1wbGF0Zm9ybS5hdXRoMC5jb20vIiwic3ViIjoiaGhra1BaQUVsQ3BwQjE4VVVMSU54V1FxUGo4NU9sOFBAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vcGxhdGZvcm0ucmFtbWVyLmFpIiwiaWF0IjoxNjQ3Mzc4MjkxLCJleHAiOjE2NDc0NjQ2OTEsImF6cCI6Imhoa2tQWkFFbENwcEIxOFVVTElOeFdRcVBqODVPbDhQIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIn0.PigoNV8a-WHQLJ7uL6r-aM9D304nHlKIXgkIHDCu1JO_WqPjEl-y8NcAl7-1OQGDaA7FmtlCfz7w1l5t6OBjc_1or87jsCyO8YAjf3WX1wOTRuxcvJU8M2ITmF4UnPBfpUJcP-zMWDbI5zi3EpKJsXW6q0DP7e-fG2_l_TylZ4pAn3ICDQv2urZ6uCYsant-PfWyt41NUH1AWwu19qcMBsgr3vTl4f8BLCaWEtlOFw_b-bQa84cC0EQzwDFMQpi05aH1ijW68YszcfXF9R57Sk1HV-92-Hur62KFaJ4KWo0XUQwmu59Det_F9VfHUqOdu13r1Es2fi8fxvQ4vHWTZA"
            }
        } else {
            config = {
                appId: '33646b47504f7237676d4e72475a7a38436f45395277595272597545686c4479',
                appSecret: '36474839764c6361706676514566695f3670555f66515a752d347443572d44343231796f73465672315679523437394e726b66763432647053336c3872724c49',
                basePath: 'https://airmeet-7add0e03a0e4118fce603f74e64e293bad5fe005.symbl.ai'
            }

        }
        const context = new AudioContext();
        const symblSdk = new symbl.Symbl(config);
        symblSdk.init(config)
        .then(async () => {
            const connectionConfig = {
              id: btoa(Math.random()) + "s9d8f98s",
              // sourceNode: source,
              reconnectOnError: true,
              disconnectOnStopRequest: false,
              disconnectOnStopRequestTimeout: 200,
              noConnectionTimeout: 20,
              insightTypes: ['action_item', 'question'],
              config: {
                meetingTitle: 'My Test Meeting',
                confidenceThreshold: 0.7,
                timezoneOffset: 480, // Offset in minutes from UTC
                languageCode: 'en-US',
                // encoding: 'opus',
                encoding: 'LINEAR16',
                sampleRateHertz: 48000,
              },
              handlers: {},
              trackers: [
                {
                    name: "Goodness",
                    vocabulary: [
                        "This is awesome",
                        "I like it",
                        "I love this"
                    ]
                }
              ],
              speaker: {
                // Optional, if not specified, will simply not send an email in the end.
                userId: 'christopherstokes@symbl.ai', // Update with valid email
                name: 'Chris Stokes'
              }
            };
            await context.close();
            const connection = await symblSdk.createConnection(connectionConfig);
            await connection.startProcessing();
        })
        .catch(err => console.error('Error in initialization.', err));
    };
</script>
</head>

<body>

<div>
    <p>Authentication</p>
    <div>
        <button onclick="javascript: authenticate()">Authenticate with appId/appSecret</button>
    </div>
    <div>
        <button onclick="javascript: authenticate(true)">Authenticate with accessToken</button>
    </div>
</div>

</body>

</html>
